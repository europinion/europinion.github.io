<!DOCTYPE html>
<html  >
<head>
  <!-- Site made with Mobirise Website Builder v4.10.4, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.10.4, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/eurstars-122x122.png" type="image/x-icon">
  <meta name="description" content="">

  <title>Code</title>
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">

  <!-- Highlight.js -->
  <link rel="stylesheet" href="assets/highlightjs/highlight.css">
  <script src="assets/highlightjs/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>
<body>
  <section class="menu cid-rvgZMVDNg8" once="menu" id="menu1-g">



    <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="index.html">
                         <img src="assets/images/eurstars-122x122.png" alt="European Stars" title="" style="height: 3.8rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap"><a class="navbar-caption text-primary display-4" href="index.html">Europinion</a></span>
            </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true"><li class="nav-item">
                    <a class="nav-link link text-white display-4" href="workflow.html">Workflow</a>
                </li><li class="nav-item"><a class="nav-link link text-white display-4" href="code.html">Code</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="data.html">Data</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="graph.html">Knowledge Graph</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="visualisation.html">Visualisation</a></li></ul>

        </div>
    </nav>
</section>

<section class="engine"><a href="https://mobirise.info/u">bootstrap html templates</a></section><section class="mbr-section content4 cid-rvhKJA0ILc" id="content4-q">



    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2"><strong>Code</strong></h2>
                <h3 class="mbr-section-subtitle align-center mbr-light mbr-fonts-style display-5">Beauty of Python, JavaScript, and SPARQL.</h3>

            </div>
        </div>
    </div>
</section>

<section class="tabs2 cid-rvhLFeJf7A" id="tabs2-w">




    <div class="container">
        <h2 class="mbr-section-title align-center pb-5 mbr-fonts-style display-5">Preparation</h2>
        <div class="media-container-row">
            <div class="col-12 col-md-8">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item"><a class="nav-link mbr-fonts-style show active display-7" role="tab" data-toggle="tab" href="#tabs2-w_tab0" aria-selected="true">
                            Acquiring</a></li>
                    <li class="nav-item"><a class="nav-link mbr-fonts-style show active display-7" role="tab" data-toggle="tab" href="#tabs2-w_tab1" aria-selected="true">Cleaning</a></li>
                    <li class="nav-item"><a class="nav-link mbr-fonts-style show active display-7" role="tab" data-toggle="tab" href="#tabs2-w_tab2" aria-selected="true">
                            Translating</a></li>



                </ul>
                <div class="tab-content">
                    <div id="tab1" class="tab-pane in active" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                              <pre>
                                  <code class="python">
  # -*- coding: utf-8 -*-
  import pandas as pd
  import requests
  import time

  # Note:
  # If you receive a very long error message, the contingent of your key is used.
  # Follow the lastSuccess instruction to continue at the point of interruption.

  # Here you add the key. (A key can be used for 1.000.000 chr/day and 10.0000.000 chr/month)
  key = "trnsl.1.1.20190625T093708Z.70b13e001e10312c.9f1c4c27c2359a0dc21d61fc4613c8b0c7887d8d"

  # Uncomment one file at a time to avoid issues.
  filenames = [   # List of all local files.
              ]

  ### Function for Saving to CSV ###
  # Nothing to do here.
  def saving(response, index):
      responseJSON = response.json()
      responseLIST = responseJSON["text"][0].split(" [!] ")

      start = index - len(responseLIST) + 1
      end = index
      indices = list(range(start, end + 1))
      position = 0

      for tweet in indices:
          df.at[tweet,"english"] = responseLIST[position]
          position += 1

      print("Saving... lastSuccess:", index)
      df.to_csv(file, sep = ";", index=False)

  ### Sending Packages to Yandex ###
  # Nothing to do here.
  def sending(package, index):
      text = " [!] ".join(package)
      lang = "en"
      data = {"key": key, "text": text, "lang": lang}

      try:
          response = requests.post("https://translate.yandex.net/api/v1.5/tr.json/translate", data=data)
          saving(response, index)
      except requests.exceptions.RequestException as e:
          print(e)
          print("Waiting for 60 sec.")
          time.sleep(60)
          sending(package, index)

  ### Packaging Tweets with the Seperator " [!] " ###
  # Nothing to do here.
  def packaging(lastSuccess = -1):
      package = []
      packageCount = 0

      for index, row in df.iterrows():
          if sum(len(tweets) for tweets in package) < 8500 and index > lastSuccess:
              package.append(row["parsed_text"])
          if sum(len(tweets) for tweets in package) >= 8500 and len(df.index) - 1 != index:
              packageCount += 1
              print("Sending... Package nr.", packageCount, "– Progress:", round((index / (len(df.index) - 1)) * 100, 2), "%")
              sending(package, index)
              package = []
              time.sleep(5)
          elif len(df.index) - 1 == index:
              packageCount += 1
              print("Sending LAST package for", file, "– Progress:", round((index / (len(df.index) - 1)) * 100, 2), "%")
              sending(package, index)
              time.sleep(5)


  ### Triggering the Chain of Functions ###
  # Here you have to uncomment/comment the code depending on if you use a NEW FILE or OLD File.
  # For OLD FILES you have to add the lastSuccess in the brackets of packaging(lastSuccess)
  for file in filenames:
      ### Two types of files:

      ### NEW FILE – NOT opened before -> has no "english" column
      df = pd.read_csv(file, delimiter = ";", encoding="utf-8", skiprows=1, names = ["created_at", "lang", "screen_name", "location", "full_text", "urls", "tags", "mentions", "retweet_count", "favorite_count", "parsed_text", "emoji"])
      df["english"] = ""
      df.to_csv(file, sep = ";", index=False)
      ### OLD FILE – partially translated
      df = pd.read_csv(file, delimiter = ";", encoding="utf-8", skiprows=1, names = ["created_at", "lang", "screen_name", "location", "full_text", "urls", "tags", "mentions", "retweet_count", "favorite_count", "parsed_text", "emoji", "english"])

      ### NEW FILE – leave brackets blank: packaging()
      ### OLD FILE – input is lastSuccess: packaging(lastSuccess)
      packaging()

                                  </code>
                                  <code class="css">
                  /* --- CSS --- */
                  #content {
                    width: 100vw;
                    height: 100vh;
                    overflow: scroll!important;
                    -webkit-overflow-scrolling: touch!important;
                  }
                  #content iframe {
                    position: absolute;
                    top: 2.5rem;
                    left: 2.5rem;
                    width: calc(100vw - 5rem);
                    height: calc(100vh - 5rem);
                    border: none;
                  }
                  @media (max-width: 767px) {
                    #content iframe {
                      top: 0;
                      left: 0;
                      width: 100vw;
                      height: 100vh;
                    }
                  }
                                  </code>
                              </pre>
                            </div>
                        </div>
                    </div>
                    <div id="tab2" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    INSERT CODE WITH HIGHLIGHT.JS
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab3" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    INSERT CODE WITH HIGHLIGHT.JS
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab4" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    INSERT CODE WITH HIGHLIGHT.JS
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab5" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    Publish your website to a local drive, FTP or host on Amazon S3, Google Cloud, Github Pages. Don't be a hostage to just one platform or service provider.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab6" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    Just drop the blocks into the page, edit content inline and publish - no technical skills required.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="tabs2 cid-rvhOgaL5vm" id="tabs2-y">




    <div class="container">
        <h2 class="mbr-section-title align-center pb-5 mbr-fonts-style display-5">Sentiment Analysis</h2>
        <div class="media-container-row">
            <div class="col-12 col-md-8">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item"><a class="nav-link mbr-fonts-style show active display-7" role="tab" data-toggle="tab" href="#tabs2-y_tab0" aria-selected="true">
                            Analysing Sentiment</a></li>
                    <li class="nav-item"><a class="nav-link mbr-fonts-style show active display-7" role="tab" data-toggle="tab" href="#tabs2-y_tab1" aria-selected="true">Gaining Knowledge</a></li>




                </ul>
                <div class="tab-content">
                    <div id="tab1" class="tab-pane in active" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">INSERT CODE WITH HIGHLIGHT.JS</p>
                            </div>
                        </div>
                    </div>
                    <div id="tab2" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    INSERT CODE WITH HIGHLIGHT.JS
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab3" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    INSERT CODE WITH HIGHLIGHT.JS
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab4" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    INSERT CODE WITH HIGHLIGHT.JS
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab5" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    Publish your website to a local drive, FTP or host on Amazon S3, Google Cloud, Github Pages. Don't be a hostage to just one platform or service provider.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div id="tab6" class="tab-pane" role="tabpanel">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="mbr-text py-5 mbr-fonts-style display-7">
                                    Just drop the blocks into the page, edit content inline and publish - no technical skills required.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section once="footers" class="cid-rvh7pWUyp3" id="footer7-h">





    <div class="container">
        <div class="media-container-row align-center mbr-white">
            <div class="row row-links">
                <ul class="foot-menu">





                <li class="foot-menu-item mbr-fonts-style display-7"><a href="contact.html" class="text-white"><strong>Contact</strong></a></li><li class="foot-menu-item mbr-fonts-style display-7"><a href="disclaimer.html" class="text-white"><strong>Disclaimer</strong></a></li><li class="foot-menu-item mbr-fonts-style display-7"><a href="references.html" class="text-white"><strong>References</strong></a></li></ul>
            </div>

            <div class="row row-copirayt">
                <p class="mbr-text mb-0 mbr-fonts-style mbr-white align-center display-7">© copyright 2019 Severin Josef Burg, Eleonora Peruch</p>
            </div>
        </div>
    </div>
</section>


  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/dropdown/js/nav-dropdown.js"></script>
  <script src="assets/dropdown/js/navbar-dropdown.js"></script>
  <script src="assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/mbr-tabs/mbr-tabs.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/theme/js/script.js"></script>


</body>
</html>
